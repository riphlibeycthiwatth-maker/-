<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏ô‡∏ß‡∏•‡∏£‡∏±‡∏ï‡∏ô‡πå‡πÄ‡∏Å‡∏°‡∏™‡πå</title>
<style>
body { font-family: Arial, sans-serif; padding: 10px; background: #f5f5f5; }
h2 { text-align: center; }
#totalScore { text-align:center; font-size:18px; margin-top:10px; }
table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; font-size:16px; }
th, td { padding: 8px; text-align: center; border: 1px solid #ccc; }
th { background-color: #4CAF50; color: white; }
input { width: 100px; text-align: center; font-size:16px; }
button { padding: 5px 8px; margin: 2px; cursor: pointer; font-size:16px; }
.add-player { margin-top: 10px; display: block; width: 100%; padding: 10px; background: #2196F3; color: white; border: none; font-size: 16px; cursor: pointer; }
.reset { background:#FF9800; color:white; }
#payments, #totals { margin-top:20px; background:#fff; padding:10px; border:1px solid #ccc; font-size:16px; }
#pricePerBallDiv { text-align:center; margin-top:10px; }
@media(max-width:500px){
    input { width: 80px; font-size:14px; }
    button { padding:5px 5px; font-size:14px; }
    th, td { padding: 6px; font-size:14px; }
}
</style>
</head>
<body>

<h2>üé± ‡∏ô‡∏ß‡∏•‡∏£‡∏±‡∏ï‡∏ô‡πå‡πÄ‡∏Å‡∏°‡∏™‡πå üé±</h2>

<div id="pricePerBallDiv">
    ‡∏£‡∏≤‡∏Ñ‡∏≤/‡πÄ‡∏°‡πá‡∏î: <input type="number" id="pricePerBall" value="10" min="1" style="width:60px;" onchange="renderTable()"> ‡∏ö‡∏≤‡∏ó
</div>

<div id="totalScore">‡πÄ‡∏°‡πá‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: 0</div>

<table id="playerTable">
  <thead>
    <tr>
      <th>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</th>
      <th>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th>
      <th>‡πÄ‡∏û‡∏¥‡πà‡∏°</th>
      <th>‡∏•‡∏î</th>
      <th>‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<button class="add-player" onclick="addPlayer()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</button>
<button class="reset" onclick="resetScores()">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>

<div id="payments"></div>
<div id="totals"></div>

<script>
let players = [];

// ‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô
function renderTable() {
    const tbody = document.querySelector('#playerTable tbody');
    tbody.innerHTML = '';
    const pricePerBall = Number(document.getElementById('pricePerBall').value) || 10;
    
    let total = 0;
    players.forEach((p) => total += p.score);
    document.getElementById('totalScore').textContent = "‡πÄ‡∏°‡πá‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: " + total;

    // ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
    players.forEach((player, index) => {
        const tr = document.createElement('tr');
        tr.style.background = index % 2 === 0 ? '#e8f5e9' : '#f1f8e9';
        tr.innerHTML = `
            <td><span onclick="editName(${index}, this)" style="cursor:pointer;">${player.name}</span></td>
            <td>${player.score}</td>
            <td><button onclick="changeScore(${index},1)">+</button></td>
            <td><button onclick="changeScore(${index},-1)">-</button></td>
            <td><button onclick="removePlayer(${index})" style="background:#f44336;color:white;">‡∏•‡∏ö</button></td>
        `;
        tbody.appendChild(tr);
    });

    calculatePayments(pricePerBall);
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 6 ‡∏Ñ‡∏ô)
function addPlayer() {
    if(players.length >= 6){
        alert("‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 6 ‡∏Ñ‡∏ô");
        return;
    }
    const name = prompt("‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà:");
    if(name){
        players.push({name, score:0});
        renderTable();
    }
}

// ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
function removePlayer(index){
    players.splice(index,1);
    renderTable();
}

// ‡πÅ‡∏Å‡πâ‡∏ä‡∏∑‡πà‡∏≠
function editName(index, span){
    const newName = prompt("‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô:", players[index].name);
    if(newName){
        players[index].name = newName;
        renderTable();
    }
}

// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
function changeScore(index, delta){
    players[index].score += delta;
    if(players[index].score <0) players[index].score=0;
    renderTable();
}

// ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
function resetScores(){
    players.forEach(p => p.score = 0);
    renderTable();
}

// ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡∏Ñ‡∏ô‡∏ï‡πà‡∏≠‡∏Ñ‡∏ô + ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥
function calculatePayments(pricePerBall){
    const paymentsDiv = document.getElementById('payments');
    const totalsDiv = document.getElementById('totals');
    if(players.length < 2){
        paymentsDiv.innerHTML = '';
        totalsDiv.innerHTML = '';
        return;
    }

    let net = players.map(p => 0); // ‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥

    let html = "<h3>‡∏ú‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏¢‡∏≠‡∏î‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏π‡πà</h3><table style='width:100%; border-collapse:collapse;'><tr><th>‡∏ú‡∏π‡πâ‡∏à‡πà‡∏≤‡∏¢</th><th>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö</th><th>‡πÄ‡∏°‡πá‡∏î‡∏ï‡πà‡∏≤‡∏á</th><th>‡πÄ‡∏á‡∏¥‡∏ô (‡∏ö‡∏≤‡∏ó)</th></tr>";
    
    for(let i=0;i<players.length;i++){
        for(let j=0;j<players.length;j++){
            if(i===j) continue;
            if(players[i].score < players[j].score){
                let diff = players[j].score - players[i].score;
                let money = diff * pricePerBall;
                net[i] -= money; // i ‡∏à‡πà‡∏≤‡∏¢
                net[j] += money; // j ‡∏£‡∏±‡∏ö
                html += `<tr style="background:${(i+j)%2===0 ? '#e8f5e9':'#f1f8e9'}"><td>${players[i].name}</td><td>${players[j].name}</td><td>${diff}</td><td>${money}</td></tr>`;
            }
        }
    }
    html += "</table>";
    paymentsDiv.innerHTML = html;

    // ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô
    let totalHtml = "<h3>‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏ô</h3><ul>";
    players.forEach((p,index)=>{
        totalHtml += `<li><strong>${p.name}</strong>: ${net[index]} ‡∏ö‡∏≤‡∏ó</li>`;
    });
    totalHtml += "</ul>";
    totalsDiv.innerHTML = totalHtml;
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
players.push({name:"‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 1", score:0});
players.push({name:"‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 2", score:0});
renderTable();
</script>

</body>
</html>